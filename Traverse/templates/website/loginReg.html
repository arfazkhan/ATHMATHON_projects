<div class="container">
      <a id="modal_trigger" href="#modal"><button hidden id="primaryButton" type="button">Get Started</button></a>

      <div id="modal" class="popupContainer" style="display:none;">
        <header class="popupHeader">
          <span class="header_title">Hi There</span>
          <span class="modal_close"><i class="fa fa-times"></i></span>
        </header>

        <section class="popupBody">
          <div class="social_login">
            <div class="">
              <a href="#" class="social_box fb">
                <span class="icon"><i class="fa fa-facebook"></i></span>
                <span class="icon_title">Connect with Facebook</span>

              </a>

              <a href="#" class="social_box google">
                <span class="icon"><i class="fa fa-google-plus"></i></span>
                <span class="icon_title">Connect with Google</span>
              </a>
            </div>

            <div class="centeredText">
              <span>Or use your Email address</span>
            </div>

            <div class="action_btns">
              <div class="one_half"><a href="#" id="login_form" class="btn">Login</a></div>
              <div class="one_half last"><a href="#" id="register_form" class="btn">Sign up</a></div>
            </div>
          </div>

          <!-- Username & Password Login form -->
          <div class="user_login">
            <form  name="login" id = "login" method="post">
              {% csrf_token %}
              <label style="color:red" id="message"></label>
              <label>Username</label>

              <input required id="uname" name="uname" type="text" class="form-control" />
              <br />

              <label>Password</label>

              <input required id="passwd" name="passwd" type="password" class="form-control" />
              <br />

              <div class="checkbox">
                <input id="remember" type="checkbox" />
                <label for="remember">Remember me on this computer</label>
              </div>

              <div class="action_btns">
                <div class="one_half"><a href="#" class="btn back_btn"><i class="fa fa-angle-double-left"></i> Back</a>
                </div>
                <div class="one_half last"><input id="btn1"     type="submit" class="btn btn_red" value="Login"></div>
              </div>
            </form>
            
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"
              integrity="sha512-rstIgDs0xPgmG6RX1Aba4KV5cWJbAMcvRCVmglpam9SoHZiUCyQVDdH2LPlxoHtrv17XWblE/V/PP+Tr04hbtA=="
              crossorigin="anonymous" referrerpolicy="no-referrer"></script>
              
            <script> 
              $(document).ready(function () {
                $("#login").validate({
                  rules : {
                    uname: {
                      required: true,
                      minlength : 2
                    },
                    passwd : {
                      required : true,
                      minlength : 8
                    },
                    messages : {
                      uname : "Enter Username"
                    }
              
                  },
                  submitHandler : function verifyLogin() {
                    var pw = document.getElementById("passwd").value;
                    var un = document.getElementById("uname").value;
                    //check empty password field  
                    if (un == "") {
                      document.getElementById("message").innerHTML = "**Fill the Username please!";
                      return false;
                      
                    }
            
            
                    if (pw == "") {
                      document.getElementById("message").innerHTML = "**Fill the password please!";
                      return false;
                    }
            
                    //minimum password length validation  
                    if (pw.length < 8) {
                      //window.alert("HI");
                      document.getElementById("message").innerHTML = "**Password length must be atleast 8 characters";
                      return false;
                    }
            
                    //maximum length of password validation  
                    if (pw.length > 15) {
                      document.getElementById("message").innerHTML = "**Password length must not exceed 15 characters";
                      return false;
                    } else {
                      {
                        //console.log("hi");
                        var uname = $('#uname').val()
                        var passwd = $('#passwd').val()
                        var data = {
                          'csrfmiddlewaretoken': '{{csrf_token}}',
                          'uname': uname,
                          'passwd': passwd
                        }
                        $.ajax({
                          url: 'ajlogin',
                          method: 'POST',
                          data: data,
                          dataType: 'json',
                          success: function (data) {
                            if (data.success) {
                              //window.alert("hi");
                              window.location.replace('login')
                            } else {
                              $('#message').html('**Invalid Credentials')
                            }
                          }
                        })
                      }
                    }
                  }
                
                })
              })

      // Plugin options and our code
      $("#modal_trigger").leanModal({
        top: 100,
        overlay: 0.6,
        closeButton: ".modal_close"
      });
      $(function () {
        // Calling Login Form
        $("#login_form").click(function () {
          $(".social_login").hide();
          $(".user_login").show();
          return false;
        });

        // Calling Register Form
        $("#register_form").click(function () {
          $(".social_login").hide();
          $(".user_register").show();
          $(".header_title").text('Register');
          return false;
        });

        // Going back to Social Forms
        $(".back_btn").click(function () {
          $(".user_login").hide();
          $(".user_register").hide();
          $(".social_login").show();
          $(".header_title").text('Login');
          return false;
        });
      });
      //PASSWORD VALIDATION

      function checkPassword() {
        var pw = document.getElementById("vpasswd").value;
        var cpw = document.getElementById("cpasswd").value;
        // window.alert(pw + cpw)
        if (pw == cpw) {

          if (pw.length < 8) {
            //window.alert("HI");
            document.getElementById("messages").innerHTML = "**Password length must be atleast 8 characters";
            return false;
          }

          //maximum length of password validation  
          if (pw.length > 15) {
            document.getElementById("messages").innerHTML = "**Password length must not exceed 15 characters";
            return false;
          }
          else {
            return true;
          }
        } else {
          document.getElementById("messages").innerHTML = "**Password Miss Match Try Again";
          return false;
        }
      }

$(document).ready(function (){
  $("#signup").validate({
    rules : {
      suname : {
        required : true,
        minlength : 6
      },
      cpasswd : {
        required : true,
        minlength : 8,
        maxlength : 16
      },

      email : {
        required : true,
        email : true
      },

      vpasswd : {
          required : true,
          minlength : 8,
          maxlength : 16
      },
    submitHandler :function checkPasswordMatch() {
      var password = $("#cpasswd").val();
      var confirmPassword = $("#vpasswd").val();
      var pw = document.getElementById("cpasswd").value;
      var cpw = document.getElementById("vpasswd").value;
      //$(document).ready(function () {
      //  $("#vpasswd").keyup(checkPasswordMatch);
      //});
      if (pw != cpw){
          window.alert("hi");
          $("#CheckPasswordMatch").html("Passwords does not match!");
          return false;
      }
          //document.getElementById("CheckPasswordMatch").innerHTML = "***Password Doesnot Match";
      else
          $("#CheckPasswordMatch").html("Passwords match.");
  }
  
    }
  })

})

$(document).ready(function () {
  $("#txtConfirmPassword").keyup(checkPasswordMatch);
});





</script>
            <a href="#" class="forgot_password">Forgot password?</a>
          </div>

          <!-- Register Form -->
          <div class="user_register">
            <form id="signup"  name="signup" method="post" action="signup">
              {% csrf_token %}
              <label style="color:red" id="messages"></label>
              <!--<label>Full Name</label>
              <input required name="fname" type="text" class="form-control" />
              <br />-->
              <label>UserName</label>
              <input required name="suname" type="text" class="form-control" />
              <br />

              <label>Email Address</label>
              <input required name="email" type="email" class="form-control" />
              <br />

              <label>Password</label>
              <input required id="vpasswd" name="spasswd" type="password" class="form-control" />
              <br />

              <label>Confirm Password</label>
              <input required id="cpasswd" name="cpasswd" type="password" class="form-control" />
              <label id="CheckPasswordMatch"></label>
              <br />

              <div class="checkbox">
                <input id="send_updates" type="checkbox" />
                <label for="send_updates">Send me occasional email updates</label>
              </div>

              <div class="action_btns">
                <div class="one_half"><a href="#" class="btn back_btn"><i class="fa fa-angle-double-left"></i> Back</a>
                </div>
                <div class="one_half last"><input type="submit" class="btn btn_red" value="Register"></div>
              </div>
            </form>
          </div>
        </section>
      </div>
    </div>